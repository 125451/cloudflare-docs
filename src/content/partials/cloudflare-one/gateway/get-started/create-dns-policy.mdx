---
{}
---

import { Render, Tabs, TabItem } from "~/components";

<Tabs syncKey="dashPlusAPI"> <TabItem label="Dashboard">

1. In [Zero Trust](https://one.dash.cloudflare.com/), go to **Gateway** > **Firewall policies**.
2. In the **DNS** tab, select **Add a policy**.
3. Name the policy.
4. Under **Traffic**, build a logical expression that defines the traffic you want to allow or block.
5. Choose an **Action** to take when traffic matches the logical expression. For example, we recommend adding a policy to block all [security categories](/cloudflare-one/policies/gateway/domain-categories/#security-categories):
   <Render
   	file="gateway/policies/block-security-categories"
   	product="cloudflare-one"
   />
6. Select **Create policy**.

</TabItem>

<TabItem label="API">

1. Create a custom API token with the following permissions:

   | Scope   | Application | Action |
   | ------- | ----------- | ------ |
   | Account | Zero Trust  | Edit   |

2. (Optional) Configure your API environment variables with your account ID, email address, and API token.
3. Send a `POST` request to the [Create a Zero Trust Gateway rule](/api/operations/zero-trust-gateway-rules-create-zero-trust-gateway-rule) endpoint:

   ```bash
   curl https://api.cloudflare.com/client/v4/accounts/{account_id}/gateway/rules \
   	--header "X-Auth-Email: <EMAIL>" \
   	--header "X-Auth-Key: <API_KEY>" \
   	--header "Content-Type: application/json" \
   	--data '{
   	"action": "allow",
   	"description": "Lisbon team access rule",
   	"device_posture": "any(device_posture.checks.passed[*] in {})",
   	"enabled": true,
   	"expiration": {
   		"duration": 10,
   		"expired": false,
   		"expires_at": "2014-01-01T05:20:20Z"
   	},
   	"filters": [
   		"http"
   	],
   	"identity": "any(identity.groups.name[*] in {\"Lisbon-team\"})",
   	"name": "Lisbon Team Access Rule",
   	"precedence": 0,
   	"rule_settings": {
   		"allow_child_bypass": false
   	},
   	"schedule": {
   		"fri": "08:00-12:30,13:30-17:00",
   		"mon": "08:00-12:30,13:30-17:00",
   		"sat": "08:00-12:30,13:30-17:00",
   		"sun": "08:00-12:30,13:30-17:00",
   		"thu": "08:00-12:30,13:30-17:00",
   		"time_zone": "America/New York",
   		"tue": "08:00-12:30,13:30-17:00",
   		"wed": "08:00-12:30,13:30-17:00"
   	},
   	"traffic": "http.request.uri matches \".*a/partial/uri.*\" and http.request.host in $01302951-49f9-47c9-a400-0297e60b6a10"
   }'
   ```

</TabItem> </Tabs>
